=== TinyMeshSession D3D12 Starting ===
main(): Calling shell.initialize()...
GlfwShell::initialize() - START
GlfwShell::initialize() - Creating factory
GlfwShell::initialize() - requestedConfigs.size()=1
GlfwShell::initialize() - Creating window
GlfwShell::initialize() - Creating platform
D3D12Context: Creating D3D12 device...
D3D12Context: Debug layer ENABLED (to capture validation messages)
D3D12Context: DRED enabled (AutoBreadcrumbs + PageFault tracking)
D3D12Context: Using HW adapter (FL 12.0)
D3D12Context: Info queue configured (break on error: DISABLED)
D3D12Context: Device created successfully
D3D12Context: Creating command queue...
D3D12Context: Command queue created successfully
D3D12Context: Creating swapchain (640x360)...
D3D12Context: Swapchain created successfully
D3D12Context: Creating RTV heap...
D3D12Context: RTV heap created successfully
D3D12Context: Creating back buffers...
D3D12Context: Back buffers created successfully
D3D12Context: Creating descriptor heaps...
D3D12Context: Creating descriptor heap manager...
D3D12Context: Descriptor heap manager created successfully
D3D12Context: Descriptor heaps created successfully
D3D12Context: Creating fence for GPU synchronization...
D3D12Context: Fence created successfully
D3D12Context: Initialization complete!
GlfwShell::initialize() - Creating session
GlfwShell::initialize() - Initializing session
PassthroughSession::initialize() - START
Device::createBuffer: type=2, requested_size=64, aligned_size=64, isUniform=0
Device::createBuffer: type=2, requested_size=32, aligned_size=32, isUniform=0
Device::createBuffer: type=1, requested_size=12, aligned_size=12, isUniform=0
Device::createTexture: IGL format=16 -> DXGI format=28
Texture::createFromResource - SUCCESS: 2x2 format=16
Texture::upload() - START: 2x2
Texture::upload() - Proceeding with upload
Texture::upload() - Dimensions: 2x2x1, bytesPerRow=8, numRows=2, totalBytes=264
Texture::upload() - Layout: RowPitch=256, Depth=1, Format=28, Dimension=3
Texture::upload() - Copy loop: depth=1, rows=2, srcDepthPitch=16, dstDepthPitch=512
Texture::upload() - CopyTextureRegion: srcBox (0,0,0)->(2,2,1), dst offset (0,0,0)
Texture::upload() - Creating fence for GPU sync
Texture::upload() - Signaling fence and waiting...
Texture::upload() - Fence signaled, upload complete!
PassthroughSession: Uploaded texture data (0x11223344 at [0,0])
Device::createTexture: IGL format=16 -> DXGI format=28
Texture::createFromResource - SUCCESS: 2x2 format=16
PassthroughSession: Created offscreen texture for validation (2x2)
Device::createShaderModule() - stage=0, entryPoint='main', debugName=''
  Compiling HLSL from string (258 bytes)...
  DEBUG BUILD: Enabling shader debug info and disabling optimizations
  Shader compiled successfully (14488 bytes bytecode)
Device::createShaderModule() - stage=1, entryPoint='main', debugName=''
  Compiling HLSL from string (229 bytes)...
  DEBUG BUILD: Enabling shader debug info and disabling optimizations
  Shader compiled successfully (14496 bytes bytecode)
Device::createRenderPipeline() START - debugName=''
  Getting shader bytecode...
  VS bytecode: 14488 bytes, PS bytecode: 14496 bytes
  Creating root signature with Push Constants (b2)/CBVs (b0,b1)/SRVs/Samplers
  Serializing root signature...
  Root signature serialized OK
  Creating root signature...
  Root signature created OK
  PSO RenderTarget[0]: BlendEnable=0, SrcBlend=2, DstBlend=1, WriteMask=0x0F
  PSO NumRenderTargets = 1 (color attachments = 1)
  PSO RTVFormats[0] = 29 (IGL format 19)
  Setting PSO topology type to TRIANGLE
  Processing vertex input state: 2 attributes
    Attribute 0: name='position', format=3, offset=0, bufferIndex=0
      Mapped 'position' -> 'POSITION'
      bufferIndex=0, isInstance=0, sampleFunc=1, InputSlotClass=0, StepRate=0
    Attribute 1: name='uv', format=1, offset=0, bufferIndex=1
      Mapped 'uv' -> 'TEXCOORD'
      bufferIndex=1, isInstance=0, sampleFunc=1, InputSlotClass=0, StepRate=0
  Final input layout: 2 elements
    [0]: POSITION (index 0), format 2, slot 0, offset 0
    [1]: TEXCOORD (index 0), format 16, slot 1, offset 0
  Reflecting vertex shader to verify input signature...
    Shader expects 2 input parameters:
      [0]: POSITION0 (semantic index 0), mask 0x0F
      [1]: TEXCOORD0 (semantic index 0), mask 0x03
  Creating pipeline state (this may take a moment)...
Device::createRenderPipeline() SUCCESS - PSO=000001F7A584C4E0, RootSig=000001F7A58445B0
RenderPipelineState: Set topology to TRIANGLELIST
PassthroughSession::initialize() - Windowed setup complete!

====== INITIALIZING HEADLESS CONTEXT ======
HeadlessD3D12Context: Debug layer enabled
HeadlessD3D12Context: Created device on HW adapter (FL 12.0)
HeadlessD3D12Context: Initialization complete
Device::createBuffer: type=2, requested_size=64, aligned_size=64, isUniform=0
Device::createBuffer: type=2, requested_size=32, aligned_size=32, isUniform=0
Device::createBuffer: type=1, requested_size=12, aligned_size=12, isUniform=0
Device::createTexture: IGL format=16 -> DXGI format=28
Texture::createFromResource - SUCCESS: 2x2 format=16
Texture::upload() - START: 2x2
Texture::upload() - Proceeding with upload
Texture::upload() - Dimensions: 2x2x1, bytesPerRow=8, numRows=2, totalBytes=264
Texture::upload() - Layout: RowPitch=256, Depth=1, Format=28, Dimension=3
Texture::upload() - Copy loop: depth=1, rows=2, srcDepthPitch=16, dstDepthPitch=512
Texture::upload() - CopyTextureRegion: srcBox (0,0,0)->(2,2,1), dst offset (0,0,0)
Texture::upload() - Creating fence for GPU sync
Texture::upload() - Signaling fence and waiting...
Texture::upload() - Fence signaled, upload complete!
HEADLESS: Uploaded texture data (0x11223344 at [0,0])
Device::createTexture: IGL format=16 -> DXGI format=28
Texture::createFromResource - SUCCESS: 2x2 format=16
HEADLESS: Created offscreen texture for validation (2x2)
Device::createShaderModule() - stage=0, entryPoint='main', debugName=''
  Compiling HLSL from string (258 bytes)...
  DEBUG BUILD: Enabling shader debug info and disabling optimizations
  Shader compiled successfully (14488 bytes bytecode)
Device::createShaderModule() - stage=1, entryPoint='main', debugName=''
  Compiling HLSL from string (229 bytes)...
  DEBUG BUILD: Enabling shader debug info and disabling optimizations
  Shader compiled successfully (14496 bytes bytecode)
Device::createRenderPipeline() START - debugName=''
  Getting shader bytecode...
  VS bytecode: 14488 bytes, PS bytecode: 14496 bytes
  Creating root signature with Push Constants (b2)/CBVs (b0,b1)/SRVs/Samplers
  Serializing root signature...
  Root signature serialized OK
  Creating root signature...
  Root signature created OK
  PSO RenderTarget[0]: BlendEnable=0, SrcBlend=2, DstBlend=1, WriteMask=0x0F
  PSO NumRenderTargets = 1 (color attachments = 1)
  PSO RTVFormats[0] = 28 (IGL format 16)
  Setting PSO topology type to TRIANGLE
  Processing vertex input state: 2 attributes
    Attribute 0: name='position', format=3, offset=0, bufferIndex=0
      Mapped 'position' -> 'POSITION'
      bufferIndex=0, isInstance=0, sampleFunc=1, InputSlotClass=0, StepRate=0
    Attribute 1: name='uv', format=1, offset=0, bufferIndex=1
      Mapped 'uv' -> 'TEXCOORD'
      bufferIndex=1, isInstance=0, sampleFunc=1, InputSlotClass=0, StepRate=0
  Final input layout: 2 elements
    [0]: POSITION (index 0), format 2, slot 0, offset 0
    [1]: TEXCOORD (index 0), format 16, slot 1, offset 0
  Reflecting vertex shader to verify input signature...
    Shader expects 2 input parameters:
      [0]: POSITION0 (semantic index 0), mask 0x0F
      [1]: TEXCOORD0 (semantic index 0), mask 0x03
  Creating pipeline state (this may take a moment)...
Device::createRenderPipeline() SUCCESS - PSO=000001F7A59CB0B0, RootSig=000001F7A58445B0
RenderPipelineState: Set topology to TRIANGLELIST
====== HEADLESS CONTEXT INITIALIZED ======

PassthroughSession::initialize() - Complete!
GlfwShell::initialize() - SUCCESS
main(): Initialization successful, calling shell.run()...
GlfwShell::run() started, window_=000001F79B9D6E10
Frame 0: willTick()
createSurfaceTextures() called #1
PlatformDevice::createTextureFromNativeDrawable() called
getCurrentBackBuffer(): index=0, resource=000001F7A57D5AC0
  backBufferIndex=0, backBuffer=000001F7A57D5AC0
Texture::createFromResource - SUCCESS: 640x360 format=17
Device::createTexture: IGL format=82 -> DXGI format=40
Texture::createFromResource - SUCCESS: 640x360 format=82

====== HEADLESS RENDERING PASS ======
CommandBuffer::begin() - Resetting allocator...
CommandBuffer::begin() - Allocator reset OK, resetting command list...
CommandBuffer::begin() - Command list reset OK
RenderCommandEncoder::RenderCommandEncoder() - START
RenderCommandEncoder: Got context
RenderCommandEncoder: Using DescriptorHeapManager heaps
RenderCommandEncoder: CBV/SRV/UAV heap = 000001F7A583A5C0
RenderCommandEncoder: Sampler heap = 000001F7A583AD70
RenderCommandEncoder: Setting descriptor heaps...
RenderCommandEncoder: Descriptor heaps set
RenderCommandEncoder: Setting up RTV...
RenderCommandEncoder: DescriptorHeapManager = 000001F7A5879C30
RenderCommandEncoder: Checking framebuffer_=000001F7A5989A00
RenderCommandEncoder: Has framebuffer with color attachment AND DescriptorHeapManager
RenderCommandEncoder: MRT count = 1 (indices.size=1)
RenderCommandEncoder: MRT loop i=0, tex=000001F7A55420C0, resource=000001F7A57DCBD0
RenderCommandEncoder: Clearing MRT attachment 0 with color (0.00, 0.00, 0.00, 1.00)
RenderCommandEncoder: MRT Created RTV #0, total RTVs now=1
RenderCommandEncoder: MRT Total RTVs created: 1
RenderCommandEncoder: Binding RTV without DSV (no hasDepth)
RenderCommandEncoder: OMSetRenderTargets with 1 RTVs, no DSV (no hasDepth)
RenderCommandEncoder: Setting default viewport...
RenderCommandEncoder: Using framebuffer color attachment
RenderCommandEncoder: Framebuffer dimensions: 2x2
RenderCommandEncoder: Set default viewport/scissor to 2x2
RenderCommandEncoder: Constructor complete!
==> PIX MARKER: HEADLESS_TEXTURE_SAMPLING <==
bindViewport called #1: x=0.0, y=0.0, w=2.0, h=2.0
bindRenderPipelineState: PSO=000001F7A59CB0B0, RootSig=000001F7A58445B0
bindRenderPipelineState: Setting topology=4
bindVertexBuffer called #1: index=0
bindVertexBuffer called #2: index=1
bindTexture called #1: index=0, texture=000001F7A5540F40
bindTexture: getting context...
bindTexture: resource=000001F7A57DE4F0, format=16, dimensions=2x2
bindTexture: allocated descriptor slot 0 for texture index t0
bindTexture: resource dimension=3, texture type=1
bindTexture: using TEXTURE2D view dimension (mip offset=0, mip count=1)
bindTexture: heap=000001F7A583A5C0, heapStart CPU=0x1f7a349a000, GPU=0x95678a00140000
bindTexture: creating SRV at slot 0, CPU handle 0x1f7a349a000
bindTexture: cached texture[0] GPU handle 0x95678a00140000 (offset from heap start: 0)
bindTexture: done
bindSamplerState called #1: index=0, sampler=000001F7A56CB440
bindSamplerState: allocated descriptor slot 0 for sampler index s0
bindSamplerState: creating sampler at slot 0, CPU handle 0x1f7a3335500
bindSamplerState: cached sampler[0] GPU handle 0xa5678a00010500
bindIndexBuffer called #1
DrawIndexed called: indexCount=6, instanceCount=1
DrawIndexed: bound CBVs - b0=0x0 (bound=0), b1=0x0 (bound=0)
DrawIndexed: bound texture descriptor table at t0 (handle=0x95678a00140000, count=1)
DrawIndexed: bound sampler descriptor table at s0 (handle=0xa5678a00010500, count=1)
DrawIndexed: VB[0] = GPU 0xa2e6000, size=64, stride=16
DrawIndexed: VB[1] = GPU 0xa2e7000, size=32, stride=8
DrawIndexed: CB drawCount now=1
getCurrentBackBuffer(): index=0, resource=0000000000000000
CommandQueue::submit() - Executing command list...
CommandQueue::submit() - Command list executed, checking device status...
CommandQueue::submit() - Device OK, presenting...
CommandQueue::submit() - Waiting for GPU...
CommandQueue::submit() - Complete!
CommandQueue::submit() - Aggregating 1 draws from CB into device
CommandQueue::submit() - Device drawCount now=1
copyBytes: format=16 (DXGI=28), bytesPerPixel=4, first 4 bytes: 34,34,34,34
HEADLESS: Reading back offscreen texture...
  Expected: [0]=0x11223344, [1]=0x11111111, [2]=0x22222222, [3]=0x33333333
  Actual:   [0]=0x11223344, [1]=0x11111111, [2]=0x22222222, [3]=0x33333333
HEADLESS: ✓ VALIDATION PASSED! Texture data matches!
====== HEADLESS RENDERING COMPLETE ======


=== PassthroughSession: VALIDATION PASS ===
CommandBuffer::begin() - Resetting allocator...
CommandBuffer::begin() - Allocator reset OK, resetting command list...
CommandBuffer::begin() - Command list reset OK
RenderCommandEncoder::RenderCommandEncoder() - START
RenderCommandEncoder: Got context
RenderCommandEncoder: Using DescriptorHeapManager heaps
RenderCommandEncoder: CBV/SRV/UAV heap = 000001F7A580D740
RenderCommandEncoder: Sampler heap = 000001F7A5833BA0
RenderCommandEncoder: Setting descriptor heaps...
RenderCommandEncoder: Descriptor heaps set
RenderCommandEncoder: Setting up RTV...
RenderCommandEncoder: DescriptorHeapManager = 000001F79BA1F0B0
RenderCommandEncoder: Checking framebuffer_=000001F7A5989A00
RenderCommandEncoder: Has framebuffer with color attachment AND DescriptorHeapManager
RenderCommandEncoder: MRT count = 1 (indices.size=1)
RenderCommandEncoder: MRT loop i=0, tex=000001F7A5540E00, resource=000001F7A57D73E0
RenderCommandEncoder: Clearing MRT attachment 0 with color (0.00, 0.00, 0.00, 1.00)
RenderCommandEncoder: MRT Created RTV #0, total RTVs now=1
RenderCommandEncoder: MRT Total RTVs created: 1
RenderCommandEncoder: Binding RTV without DSV (no hasDepth)
RenderCommandEncoder: OMSetRenderTargets with 1 RTVs, no DSV (no hasDepth)
RenderCommandEncoder: Setting default viewport...
RenderCommandEncoder: Using framebuffer color attachment
RenderCommandEncoder: Framebuffer dimensions: 2x2
RenderCommandEncoder: Set default viewport/scissor to 2x2
RenderCommandEncoder: Constructor complete!
==> PIX MARKER: WINDOWED_TEXTURE_SAMPLING <==
bindViewport called #2: x=0.0, y=0.0, w=2.0, h=2.0
bindRenderPipelineState: PSO=000001F7A584C4E0, RootSig=000001F7A58445B0
bindRenderPipelineState: Setting topology=4
bindVertexBuffer called #3: index=0
bindTexture called #2: index=0, texture=000001F7A5541E40
bindTexture: getting context...
bindTexture: resource=000001F7A57D3510, format=16, dimensions=2x2
bindTexture: allocated descriptor slot 0 for texture index t0
bindTexture: resource dimension=3, texture type=1
bindTexture: using TEXTURE2D view dimension (mip offset=0, mip count=1)
bindTexture: heap=000001F7A580D740, heapStart CPU=0x1f7a3475000, GPU=0x35678a00120000
bindTexture: creating SRV at slot 0, CPU handle 0x1f7a3475000
bindTexture: cached texture[0] GPU handle 0x35678a00120000 (offset from heap start: 0)
bindTexture: done
bindSamplerState called #2: index=0, sampler=000001F7A56CC2E0
bindSamplerState: allocated descriptor slot 0 for sampler index s0
bindSamplerState: creating sampler at slot 0, CPU handle 0x1f7a3335100
bindSamplerState: cached sampler[0] GPU handle 0x45678a00010100
bindIndexBuffer called #2
DrawIndexed called: indexCount=6, instanceCount=1
DrawIndexed: bound CBVs - b0=0x0 (bound=0), b1=0x0 (bound=0)
DrawIndexed: bound texture descriptor table at t0 (handle=0x35678a00120000, count=1)
DrawIndexed: bound sampler descriptor table at s0 (handle=0x45678a00010100, count=1)
DrawIndexed: VB[0] = GPU 0x87bb000, size=64, stride=16
DrawIndexed: VB[1] = GPU 0x87bc000, size=32, stride=8
DrawIndexed: CB drawCount now=1
getCurrentBackBuffer(): index=0, resource=000001F7A57D5AC0
CommandQueue::submit() - Executing command list...
CommandQueue::submit() - Command list executed, checking device status...
CommandQueue::submit() - Device OK, presenting...
CommandQueue::submit() - Present OK
CommandQueue::submit() - Waiting for GPU...
CommandQueue::submit() - Complete!
CommandQueue::submit() - Aggregating 1 draws from CB into device
CommandQueue::submit() - Device drawCount now=1
PassthroughSession: Reading back offscreen texture...
copyBytes: format=16 (DXGI=28), bytesPerPixel=4, first 4 bytes: 34,34,34,34
PassthroughSession: Readback successful!
  Expected: [0]=0x11223344, [1]=0x11111111, [2]=0x22222222, [3]=0x33333333
  Actual:   [0]=0x11223344, [1]=0x11111111, [2]=0x22222222, [3]=0x33333333
PassthroughSession: ✓ VALIDATION PASSED! Texture data matches!
=== PassthroughSession: VALIDATION COMPLETE ===

CommandBuffer::begin() - Resetting allocator...
CommandBuffer::begin() - Allocator reset OK, resetting command list...
CommandBuffer::begin() - Command list reset OK
RenderCommandEncoder::RenderCommandEncoder() - START
RenderCommandEncoder: Got context
RenderCommandEncoder: Using DescriptorHeapManager heaps
RenderCommandEncoder: CBV/SRV/UAV heap = 000001F7A580D740
RenderCommandEncoder: Sampler heap = 000001F7A5833BA0
RenderCommandEncoder: Setting descriptor heaps...
RenderCommandEncoder: Descriptor heaps set
RenderCommandEncoder: Setting up RTV...
RenderCommandEncoder: DescriptorHeapManager = 000001F79BA1F0B0
RenderCommandEncoder: Checking framebuffer_=000001F7A5989A00
RenderCommandEncoder: Has framebuffer with color attachment AND DescriptorHeapManager
RenderCommandEncoder: MRT count = 1 (indices.size=1)
RenderCommandEncoder: MRT loop i=0, tex=000001F7A5541A80, resource=000001F7A57D5AC0
RenderCommandEncoder: Clearing MRT attachment 0 with color (0.00, 0.00, 0.00, 1.00)
RenderCommandEncoder: MRT Created RTV #0, total RTVs now=1
RenderCommandEncoder: MRT Total RTVs created: 1
RenderCommandEncoder: Binding RTV without DSV (no hasDepth)
RenderCommandEncoder: OMSetRenderTargets with 1 RTVs, no DSV (no hasDepth)
RenderCommandEncoder: Setting default viewport...
RenderCommandEncoder: Using framebuffer color attachment
RenderCommandEncoder: Framebuffer dimensions: 640x360
RenderCommandEncoder: Set default viewport/scissor to 640x360
RenderCommandEncoder: Constructor complete!
bindViewport called #3: x=0.0, y=0.0, w=640.0, h=360.0
bindRenderPipelineState: PSO=000001F7A584C4E0, RootSig=000001F7A58445B0
bindRenderPipelineState: Setting topology=4
bindTexture called #3: index=0, texture=000001F7A5541E40
bindTexture: getting context...
bindTexture: resource=000001F7A57D3510, format=16, dimensions=2x2
bindTexture: allocated descriptor slot 0 for texture index t0
bindTexture: resource dimension=3, texture type=1
bindTexture: using TEXTURE2D view dimension (mip offset=0, mip count=1)
bindTexture: heap=000001F7A580D740, heapStart CPU=0x1f7a3475000, GPU=0x35678a00120000
bindTexture: creating SRV at slot 0, CPU handle 0x1f7a3475000
bindTexture: cached texture[0] GPU handle 0x35678a00120000 (offset from heap start: 0)
bindTexture: done
bindSamplerState called #3: index=0, sampler=000001F7A56CC2E0
bindSamplerState: allocated descriptor slot 0 for sampler index s0
bindSamplerState: creating sampler at slot 0, CPU handle 0x1f7a3335100
bindSamplerState: cached sampler[0] GPU handle 0x45678a00010100
bindIndexBuffer called #3
DrawIndexed called: indexCount=6, instanceCount=1
DrawIndexed: bound CBVs - b0=0x0 (bound=0), b1=0x0 (bound=0)
DrawIndexed: bound texture descriptor table at t0 (handle=0x35678a00120000, count=1)
DrawIndexed: bound sampler descriptor table at s0 (handle=0x45678a00010100, count=1)
DrawIndexed: VB[0] = GPU 0x87bb000, size=64, stride=16
DrawIndexed: VB[1] = GPU 0x87bc000, size=32, stride=8
DrawIndexed: CB drawCount now=1
CommandQueue::submit() - Executing command list...
CommandQueue::submit() - Command list executed, checking device status...
[IGL] Error in (unsigned __int64 __cdecl igl::d3d12::CommandQueue::submit(const class igl::ICommandBuffer &,bool)).
DEVICE REMOVED! Reason: 0x887A002B
D3D12 Info Queue has 4 messages:
  [ERROR] ID3D12CommandList::DrawIndexedInstanced: The render target format in slot 0 does not match that specified by the current pipeline state. (pipeline state = R8G8B8A8_UNORM_SRGB, render target format = R8G8B8A8_UNORM, RTV ID3D12Resource* = 0x000001F7A57D73E0:'Unnamed ID3D12Resource Object')
  [ERROR] ID3D12CommandList::DrawIndexedInstanced: The render target format in slot 0 does not match that specified by the current pipeline state. (pipeline state = R8G8B8A8_UNORM_SRGB, render target format = B8G8R8A8_UNORM, RTV ID3D12Resource* = 0x000001F7A57D5AC0:'Unnamed ID3D12Resource Object')
  [ERROR] ID3D12CommandQueue1::ExecuteCommandLists: A command list, which writes to a swapchain back buffer, may only be executed when that back buffer is the back buffer that will be presented during the next call to Present*. Such a back buffer is also referred to as the "current back buffer". Swap Chain: 0x000001F7A53CA000:'Unnamed Object' - Current Back Buffer Buffer: 0x000001F7A57D6750:'Unnamed ID3D12Resource Object' - Attempted Write Buffer: 0x000001F7A57D5AC0:'Unnamed ID3D12Resource Object'
  [ERROR] ID3D12Device::RemoveDevice: Device removal has been triggered for the following reason (DXGI_ERROR_ACCESS_DENIED: The application attempted to use a resource it does not access to.  This  could be, for example, rendering to a texture while only having read access.).
